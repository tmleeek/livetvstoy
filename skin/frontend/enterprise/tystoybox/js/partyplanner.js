Enterprise.Bundle.selection=function(e,t){if(""==t||"none"==t)return!1;var n=null;return this.config.options[e].isPartyPlanner?($("bundle-option-"+t+"-qty-input")&&(n=$("bundle-option-"+t+"-qty-input").value),0>=n&&$("bundle-option-"+e+"-qty-input")&&(n=$("bundle-option-"+e+"-qty-input").value)):n=1!=this.config.options[e].selections[t].customQty||this.config.options[e].isMulti?this.config.options[e].selections[t].qty:$("bundle-option-"+e+"-qty-input")?$("bundle-option-"+e+"-qty-input").value:1,0>=n&&(n=1),{qty:n,name:this.config.options[e].selections[t].name.escapeHTML()}},Product.Bundle.prototype.populateQty=function(e,t){return""==t||"none"==t?void this.showQtyInput(e,"0",!1):void (this.config.options[e].isPartyPlanner?1==this.config.options[e].selections[t].customQty?this.showQtyInput(t,this.config.options[e].selections[t].qty,!0):this.showQtyInput(t,this.config.options[e].selections[t].qty,!1):1==this.config.options[e].selections[t].customQty?this.showQtyInput(e,this.config.options[e].selections[t].qty,!0):this.showQtyInput(e,this.config.options[e].selections[t].qty,!1))},Product.Bundle.prototype.changeOptionQty=function(e,t,n){var r=!0;if("undefined"!=typeof t&&(8==t.keyCode||46==t.keyCode)&&(r=!1),r&&(0==Number(e.value)||isNaN(Number(e.value)))&&(e.value=1),parts=e.id.split("-"),optionId=parts[2],n){var i=n.split("-");optionId=i[2],selectionId=this.config.selected[optionId][0],this.config.options[optionId].selections[selectionId].qty=e.value,this.reloadPrice()}else this.config.options[optionId].isMulti||(selectionId=this.config.selected[optionId][0],this.config.options[optionId].selections[selectionId].qty=1*e.value,this.reloadPrice());updatePartyTotal()},Product.Bundle.prototype.selectionPrice=function(e,t){if(""==t||"none"==t)return 0;var n,r,i=null;if(this.config.options[e].isPartyPlanner?($("bundle-option-"+t+"-qty-input")&&(i=$("bundle-option-"+t+"-qty-input").value),0>=i&&$("bundle-option-"+e+"-qty-input")&&(i=$("bundle-option-"+e+"-qty-input").value)):i=1!=this.config.options[e].selections[t].customQty||this.config.options[e].isMulti?this.config.options[e].selections[t].qty:$("bundle-option-"+t+"-qty-input")?$("bundle-option-"+t+"-qty-input").value:$("bundle-option-"+e+"-qty-input")?$("bundle-option-"+e+"-qty-input").value:1,0>=i&&(i=1),"0"==this.config.priceType){price=this.config.options[e].selections[t].price,tierPrice=this.config.options[e].selections[t].tierPrice;for(var s=0;s<tierPrice.length;s++)Number(tierPrice[s].price_qty)<=i&&Number(tierPrice[s].price)<=price&&(price=tierPrice[s].price,n=tierPrice[s].priceInclTax,r=tierPrice[s].priceExclTax)}else selection=this.config.options[e].selections[t],price="0"==selection.priceType?selection.priceValue:this.config.basePrice*selection.priceValue/100;var o=this.config.options[e].selections[t].plusDisposition+this.config.options[e].selections[t].minusDisposition;if(this.config.specialPrice&&(newPrice=price*this.config.specialPrice/100,price=Math.min(newPrice,price)),selection=this.config.options[e].selections[t],void 0!==n&&void 0!==r?(priceInclTax=n,price=r):void 0!==selection.priceInclTax?(priceInclTax=selection.priceInclTax,price=void 0!==selection.priceExclTax?selection.priceExclTax:selection.price):priceInclTax=price,"1"==this.config.priceType||taxCalcMethod==CACL_TOTAL_BASE){var u=new Array(price*i,o*i,priceInclTax*i);return u}if(taxCalcMethod==CACL_UNIT_BASE){price=(Math.round(100*price)/100).toString(),o=(Math.round(100*o)/100).toString(),priceInclTax=(Math.round(100*priceInclTax)/100).toString();var u=new Array(price*i,o*i,priceInclTax*i);return u}price=(Math.round(price*i*100)/100).toString(),o=(Math.round(o*i*100)/100).toString(),priceInclTax=(Math.round(priceInclTax*i*100)/100).toString();var u=new Array(price,o,priceInclTax);return u}